"use strict";(self.webpackChunkqui_wc=self.webpackChunkqui_wc||[]).push([["form-field-wrapper-element"],{6473:(q,p,d)=>{d.r(p),d.d(p,{FormFieldWrapperComponent:()=>O,FormFieldWrapperModule:()=>M});var e=d(5879),f=d(6814),r=d(5683),h=d(6569),m=d(2495),b=d(6223),I=d(7394),F=d(5348);const c=["fieldLabel"],C=["fieldDescription"];function n(o,_){if(1&o&&(e.TgZ(0,"div",8),e._uU(1),e.qZA()),2&o){const i=e.oxw();e.Q6J("id",i.id+"-additional-description"),e.xp6(1),e.hij(" ",i.ariaDescription," ")}}function a(o,_){1&o&&e.GkF(0)}function u(o,_){if(1&o&&(e.ynx(0),e.YNc(1,a,1,0,"ng-container",9),e.BQk()),2&o){e.oxw();const i=e.MAs(13);e.xp6(1),e.Q6J("ngTemplateOutlet",i)}}function E(o,_){1&o&&e.GkF(0)}function D(o,_){if(1&o&&(e.ynx(0),e.YNc(1,E,1,0,"ng-container",9),e.BQk()),2&o){e.oxw();const i=e.MAs(13);e.xp6(1),e.Q6J("ngTemplateOutlet",i)}}function v(o,_){if(1&o&&(e.TgZ(0,"div",12),e._UZ(1,"qui-ng-icon",13),e.TgZ(2,"span",14),e._uU(3,"error"),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA()()),2&o){const i=e.oxw(),t=i.index,s=i.$implicit,l=e.oxw(2);e.Q6J("id",l.id+"-error-"+t),e.xp6(5),e.Oqu(s)}}function y(o,_){if(1&o&&(e.ynx(0),e.YNc(1,v,6,2,"div",11),e.BQk()),2&o){const i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i._controlHasError)}}function N(o,_){if(1&o&&e.YNc(0,y,2,1,"ng-container",10),2&o){const i=e.oxw();e.Q6J("ngForOf",i.messages)}}const A=[[["","fieldLabel",""]],[["","fieldDescription",""]],[["","fieldControl",""]]],L=function(o){return{"qui-color-accent":o}},T=["[fieldLabel]","[fieldDescription]","[fieldControl]"];let O=(()=>{class o{get isDisabled(){return this.disabled}get isdisabledFocusable(){return this.disabledFocusable}get _labelForNestedFFW(){return this.quiRole&&this.fieldLabel?.nativeElement.children.length?this._fieldLabelId:null}get _descForNestedFFW(){return this.quiRole&&this.fieldDescription?.nativeElement.children.length?this._fieldDescriptionId:null}get _hintForNestedFFW(){return this.quiRole?this._fieldDescribedById:null}set id(i){this._id=i,this._fieldLabelId=`${this._id}-group-label`,this._fieldDescriptionId=`${this._id}-group-description`}get id(){return this._id}set messages(i){this._messages=(0,m.Eq)(i)}get messages(){return this._messages}constructor(i){this.elementRef=i,this.hostClass=!0,this._subscriptions=new I.w0,this._controlHasError=!1,this._defaultId=(0,F.lY)(),this._fieldLabelId=`${this._defaultId}-group-label`,this._fieldDescriptionId=`${this._defaultId}-group-description`,this._fieldDescribedById=null,this._id=`${this._defaultId}-form-wrapper`,this.quiRole=null,this.color="primary",this.messagePosition="below",this.disabled=!1,this.disabledFocusable=!1,this.ariaDescription=null,this.elementRef.nativeElement.controlInterface=this}ngOnChanges(i){if(i.messages){const t=this.messages.length>0;t!==this._controlHasError&&(this._controlHasError=t,this._getErrorIds()),requestAnimationFrame(()=>{this._syncDescribedByIds()})}i.disabled&&(i.disabled.currentValue&&"string"==typeof i.disabled.currentValue&&"string"==typeof i.disabled.currentValue&&(this.disabled=JSON.parse(i.disabled.currentValue)),this._updateDisabledProperty()),i.disabledFocusable&&this._updateDisabledFocusableProperty(),i.ariaDescription&&this._syncDescribedByIds()}_updateDisabledProperty(){const i=requestAnimationFrame(()=>{const t=document.getElementsByClassName("qui-form-field-wrapper");this._resetDisabled(t);for(let s=0;s<t.length;s++)(t[s]?.querySelectorAll("[fieldControl]")).forEach(g=>{g.className.includes("qui-")&&!g.className.includes("qui-form-field-wrapper")&&t[s]?.classList.contains("qui-disabled")&&g.controlInterface&&(g.controlInterface.disabled=!0)});cancelAnimationFrame(i)})}_updateDisabledFocusableProperty(){requestAnimationFrame(()=>{const i=document.getElementsByClassName("qui-form-field-wrapper");this._resetDisabledFocusable(i);for(let t=0;t<i.length;t++)(i[t]?.querySelectorAll("[fieldControl]")).forEach(l=>{l.className.includes("qui-")&&!l.className.includes("qui-form-field-wrapper")&&i[t]?.classList.contains("qui-disabled-focusable")&&l.controlInterface&&(l.controlInterface.disabledFocusable=!0)})})}_resetDisabled(i){for(let t=0;t<i.length;t++)(i[t]?.querySelectorAll("[fieldControl]")).forEach(l=>{l.className.includes("qui-")&&!l.className.includes("qui-form-field-wrapper")&&l.controlInterface&&(l.controlInterface.disabled=!1)})}_resetDisabledFocusable(i){for(let t=0;t<i.length;t++)(i[t]?.querySelectorAll("[fieldControl]")).forEach(l=>{l.className.includes("qui-")&&!l.className.includes("qui-form-field-wrapper")&&l.controlInterface&&(l.controlInterface.disabledFocusable=!1)})}ngAfterContentInit(){const i=this.elementRef.nativeElement.querySelector("[fieldControl]"),t=this.elementRef.nativeElement;t.addEventListener("focusin",s=>{const l=s.target.closest(".qui-form-field-wrapper");l&&!l.className.includes("qui-disabled")&&l.classList.add("focus-label")}),t.addEventListener("focusout",()=>{t.classList.remove("focus-label")}),this._childControl=i,this._childControl&&this._childControl.controlInterface&&(this._controlInterface=this._childControl.controlInterface,this._childNgControl=this._childControl.controlInterface.ngControl),requestAnimationFrame(()=>{this._propogateLabelDescInChild()}),this._initializeControl()}ngAfterViewInit(){this._updateDisabledProperty(),this._updateDisabledFocusableProperty()}ngAfterViewChecked(){!this._childNgControl&&!this._control&&this._childControl&&this._childControl.controlInterface&&(this._controlInterface=this._childControl.controlInterface,this._control=this._childControl.controlInterface._control)}ngOnDestroy(){this._subscriptions.unsubscribe()}_propogateLabelDescInChild(){this.fieldLabel?.nativeElement.children.length&&this._childControl&&this._controlInterface&&(this._controlInterface.quiAriaLabelledby=this._fieldLabelId),this._syncDescribedByIds()}_getErrorIds(){const i=[];return this._controlHasError&&this._messages&&this._messages.forEach((t,s)=>{i.push(`${this.id}-error-${s}`)}),i}_syncDescribedByIds(){let i;const t=[],s=this._childControl?.querySelector("[hint-text], .mat-hint, .hint-text");this.fieldDescription?.nativeElement.children.length&&this._childControl&&this._controlInterface&&t.push(this._fieldDescriptionId),"above"===this.messagePosition&&this._setErrorMessages(t),this.ariaDescription&&t.push(this.elementRef.nativeElement.querySelector(".additional-description")?.getAttribute("id")),s&&(i=s.getAttribute("id"),i||(i=`${this.id}-hint`,s.setAttribute("id",i)),this._childControl.querySelector('[role="radiogroup"], [role="group"]')?s.classList.contains("group-hint")&&t.push(i):t.push(i)),"below"===this.messagePosition&&this._setErrorMessages(t),this._fieldDescribedById=t.join(" ")||null,this._setDescribedByIds(t)}_setDescribedByIds(i){this._controlInterface&&(this._controlInterface.quiAriaDescribedby=i.join(" ")||null)}_setErrorMessages(i){this._getErrorIds().length&&i.push(...this._getErrorIds())}_initializeControl(){this._controlInterface?.stateChanges?.subscribe(()=>{requestAnimationFrame(()=>{this._syncDescribedByIds()})})}_clickLabel(){!this.disabled&&this._controlInterface&&this._controlInterface.focus()}static#e=this.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq))};static#i=this.\u0275cmp=e.Xpm({type:o,selectors:[["qui-ng-form-field-wrapper"]],viewQuery:function(t,s){if(1&t&&(e.Gf(c,7,e.SBq),e.Gf(C,7,e.SBq)),2&t){let l;e.iGM(l=e.CRH())&&(s.fieldLabel=l.first),e.iGM(l=e.CRH())&&(s.fieldDescription=l.first)}},hostVars:6,hostBindings:function(t,s){2&t&&e.ekj("qui-form-field-wrapper",s.hostClass)("qui-disabled",s.isDisabled)("qui-disabled-focusable",s.isdisabledFocusable)},inputs:{quiRole:"quiRole",color:"color",messagePosition:"messagePosition",id:"id",messages:"messages",disabled:["disabled","disabled",e.VuI],disabledFocusable:["disabledFocusable","disabledFocusable",e.VuI],ariaDescription:"ariaDescription"},features:[e.Xq5,e.TTD],ngContentSelectors:T,decls:14,vars:17,consts:[[1,"label-container",3,"ngClass"],[1,"form-field-label",3,"id","click"],["fieldLabel",""],[1,"form-field-description",3,"id"],["fieldDescription",""],["class","additional-description visually-hidden",3,"id",4,"ngIf"],[4,"ngIf"],["errorMessages",""],[1,"additional-description","visually-hidden",3,"id"],[4,"ngTemplateOutlet"],[4,"ngFor","ngForOf"],["class","qui-error","role","alert",3,"id",4,"ngIf"],["role","alert",1,"qui-error",3,"id"],["size","md","iconName","warning"],[1,"visually-hidden"]],template:function(t,s){if(1&t&&(e.F$t(A),e.TgZ(0,"div",0)(1,"div",1,2),e.NdJ("click",function(){return s._clickLabel()}),e.Hsn(3),e.qZA(),e.TgZ(4,"div",3,4),e.Hsn(6,1),e.qZA(),e.YNc(7,n,2,2,"div",5),e.YNc(8,u,2,1,"ng-container",6),e.qZA(),e.TgZ(9,"div"),e.Hsn(10,2),e.qZA(),e.YNc(11,D,2,1,"ng-container",6),e.YNc(12,N,1,1,"ng-template",null,7,e.W1O)),2&t){const l=e.MAs(2);e.Q6J("ngClass",e.VKq(15,L,"accent"===s.color)),e.xp6(1),e.ekj("hidden",0===l.childNodes.length),e.Q6J("id",s._fieldLabelId),e.uIk("color",s.color),e.xp6(3),e.ekj("hidden",0===l.childNodes.length),e.Q6J("id",s._fieldDescriptionId),e.uIk("color",s.color),e.xp6(3),e.Q6J("ngIf",s.ariaDescription),e.xp6(1),e.Q6J("ngIf","above"===s.messagePosition),e.xp6(1),e.uIk("role",s.quiRole)("aria-labelledby",s._labelForNestedFFW)("aria-describedby",s._descForNestedFFW&&s._hintForNestedFFW?s._descForNestedFFW+" "+s._hintForNestedFFW:s._hintForNestedFFW||s._descForNestedFFW),e.xp6(2),e.Q6J("ngIf","below"===s.messagePosition)}},dependencies:[f.mk,f.sg,f.O5,f.tP,h.o],encapsulation:2})}return o})(),M=(()=>{class o{static#e=this.\u0275fac=function(t){return new(t||o)};static#i=this.\u0275mod=e.oAB({type:o});static#t=this.\u0275inj=e.cJS({imports:[f.ez,b.UX,r.lN,h.Q]})}return o})()},6569:(q,p,d)=>{d.d(p,{Q:()=>F,o:()=>I});var e=d(6814),f=d(9862),r=d(5879),h=d(3214);function m(c,C){if(1&c&&(r.O4$(),r.kcU(),r._UZ(0,"qui-ng-badge",2)),2&c){const n=r.oxw();r.Q6J("appearance",n.badgeConfig.appearance||"dot")("color",n.badgeConfig.color)("content",n.badgeConfig.content)("offsetX",n.badgeConfig.offsetX||0)("offsetY",n.badgeConfig.offsetY||0)("hidden",n.badgeConfig.hidden||!1)("description",n.badgeConfig.description||"")}}let b=(()=>{class c{constructor(n){this.http=n}getIconsSprite(n){return this.http.get(`${n}`,{responseType:"text"})}static#e=this.\u0275fac=function(a){return new(a||c)(r.LFG(f.eN))};static#i=this.\u0275prov=r.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})(),I=(()=>{class c{get hostClass(){return this.tier>1?`qui-tier-${this.tier}-icon qui-icon`:"qui-icon"}set tier(n){this._tier=n}get tier(){return void 0===this._tier?this.iconHref?.includes("tier-2")?2:this.iconHref?.includes("tier-3")?3:1:this._tier}constructor(n,a){this.iconService=n,this.renderer=a,this.window=window,this.size=null,this.iconName="check",this.quiAriaLabel=null,this.iconHref=null,this.quiError=new r.vpe,this.quiLoad=new r.vpe,this._defaultIconHref=new Map([[1,this.window?.qui?.settings?.ICON_HREF||"https://a.tiaa-cdn.net/public/ui/global/images/qui/ethos-1/qui-icons-sprite.svg"],[2,this.window?.qui?.settings?.ICON_HREF_TIER_2||"https://a.tiaa-cdn.net/public/ui/global/images/qui/ethos-2/qui-icons-tier-2-sprite.svg"]])}ngOnInit(){this.iconHref=this.iconHref||this._defaultIconHref.get(this.tier),this._fetchIcons(this.iconHref),("large"===this.size||"medium"===this.size||"small"===this.size)&&console.warn(`%c[QUI] DEPRECATION NOTICE: the value of ${this.size} for iconSize is deprecated and will be removed on or around 6 Dec 2024. Use one of the t-shirt sizes instead.`,"color: red")}_fetchIcons(n){if(!document.querySelectorAll(`[svg-src="${n}"]`).length&&null!==n){const a=this.renderer.createElement("div");this.renderer.addClass(a,"qui-icon-sprite"),this.renderer.setAttribute(a,"svg-src",n),this.renderer.setStyle(a,"display","none"),this.renderer.setAttribute(a,"aria-hidden","true"),this.renderer.insertBefore(document.body,a,document.body.childNodes[0]),this.iconService.getIconsSprite(n).subscribe({next:u=>{this.renderer.setProperty(a,"innerHTML",u),this._monitorIconLoad()},error:u=>{console.error("Error while fetching qui svg-sprite",u)}})}}ngOnChanges(n){n.badgeConfig&&"string"==typeof this.badgeConfig&&(this.badgeConfig=JSON.parse(this.badgeConfig)),n.iconHref&&n.iconHref.previousValue!==n.iconHref.currentValue&&(this.tier&&"string"==typeof this.tier&&""!==this.tier&&(this.tier=parseInt(this.tier)),this.iconHref=this.iconHref||this._defaultIconHref.get(this.tier),this._fetchIcons(this.iconHref)),n.iconName&&this._monitorIconLoad(),n.tier&&n.tier.currentValue!==n.tier.previousValue&&(this.tier&&"string"==typeof this.tier&&""!==this.tier&&(this.tier=parseInt(this.tier)),this.iconHref=this._defaultIconHref.get(this.tier),this._fetchIcons(this.iconHref)),n.iconSize&&("small"===n.iconSize.currentValue||"medium"===n.iconSize.currentValue||"large"===n.iconSize.currentValue)&&console.warn(`%c[QUI] DEPRECATION NOTICE: the value of ${n.iconSize.currentValue} for iconSize is deprecated and will be removed on or around 6 Dec 2024. Use one of the t-shirt sizes instead.`,"color: red")}_monitorIconLoad(){this.iconName&&(document.querySelector(`#${this.iconName}`)?this.quiLoad.emit():this.quiError.emit({message:`${this.iconName} symbol not found`}))}static#e=this.\u0275fac=function(a){return new(a||c)(r.Y36(b),r.Y36(r.Qsj))};static#i=this.\u0275cmp=r.Xpm({type:c,selectors:[["qui-ng-icon"]],hostVars:2,hostBindings:function(a,u){2&a&&r.Tol(u.hostClass)},inputs:{size:"size",color:"color",tier:["tier","tier",r.Cb_],iconName:"iconName",quiAriaLabel:"quiAriaLabel",iconHref:"iconHref",badgeConfig:"badgeConfig"},outputs:{quiError:"quiError",quiLoad:"quiLoad"},features:[r.Xq5,r.TTD],decls:3,vars:6,consts:[["role","img",3,"load"],[3,"appearance","color","content","offsetX","offsetY","hidden","description",4,"ngIf"],[3,"appearance","color","content","offsetX","offsetY","hidden","description"]],template:function(a,u){1&a&&(r.O4$(),r.TgZ(0,"svg",0),r.NdJ("load",function(){return u._monitorIconLoad()}),r._UZ(1,"use"),r.qZA(),r.YNc(2,m,1,7,"qui-ng-badge",1)),2&a&&(r.uIk("size",u.size)("color",u.color)("aria-label",u.quiAriaLabel)("aria-hidden",!u.quiAriaLabel||null),r.xp6(1),r.uIk("href","#"+u.iconName),r.xp6(1),r.Q6J("ngIf",u.badgeConfig))},dependencies:[e.O5,h.F],encapsulation:2})}return c})(),F=(()=>{class c{static#e=this.\u0275fac=function(a){return new(a||c)};static#i=this.\u0275mod=r.oAB({type:c});static#t=this.\u0275inj=r.cJS({imports:[e.ez,f.JF,h.T]})}return c})()}}]);